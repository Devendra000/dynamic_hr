# Form Template (CREATE):
curl -X 'POST' \
  'http://localhost:8000/api/admin/form-templates' \
  -H 'accept: */*' \
  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3NjY1NjQ4NDAsImV4cCI6MTc2NjU2ODQ0MCwibmJmIjoxNzY2NTY0ODQwLCJqdGkiOiJlbWlkeDRGSXBCQ1FEcDJQIiwic3ViIjoiMSIsInBydiI6IjIzYmQ1Yzg5NDlmNjAwYWRiMzllNzAxYzQwMDg3MmRiN2E1OTc2ZjciLCJ1c2VyX2lkIjoxLCJlbWFpbCI6ImFkbWluQGR5bmFtaWNoci5jb20iLCJuYW1lIjoiU3lzdGVtIEFkbWluaXN0cmF0b3IiLCJyb2xlcyI6WyJhZG1pbiJdfQ.X0CSr5Y77bsOW6o_QK447Z8y3QGOW5SC-sAlLILHsAs' \
  -H 'Content-Type: application/json' \
  -H 'X-CSRF-TOKEN: ' \
  -d '{
  "title": "Employee Feedback Form",
  "description": "Annual employee feedback survey",
  "status": "active",
  "fields": [
    {
      "field_type": "text",
      "label": "Your Name",
      "placeholder": "Enter your name",
      "validation_rules": {
        "min": 3,
        "max": 100
      },
      "is_required": true,
      "order": 1
    },
    {
      "field_type": "number",
      "label": "Your age",
      "placeholder": "Enter your age",
      "validation_rules": {
        "min": 18
      },
      "is_required": true,
      "order": 2
    },
    {
      "field_type": "radio",
      "label": "Your Gender",
      "placeholder": "Enter your gender",
      "options": [
        "Male",
        "Female",
        "Other"
      ],
      "is_required": true,
      "order": 3
    },
    {
      "field_type": "text",
      "label": "Your feedback",
      "placeholder": "Enter your feedback in 100 characters",
      "validation_rules": {
        "max": 100
      },
      "is_required": true,
      "order": 4
    }
  ]
}'

Response:
{
  "success": true,
  "message": "Form template created successfully",
  "data": {
    "title": "Employee Feedback Form",
    "description": "Annual employee feedback survey",
    "status": "draft",
    "created_by": 1,
    "updated_at": "2025-12-24T08:30:19.000000Z",
    "created_at": "2025-12-24T08:30:19.000000Z",
    "id": 1,
    "fields": [
      {
        "id": 1,
        "form_template_id": 1,
        "field_type": "text",
        "label": "Your Name",
        "placeholder": "Enter your name",
        "options": null,
        "validation_rules": {
          "min": 3,
          "max": 100
        },
        "is_required": true,
        "order": 1,
        "created_at": "2025-12-24T08:30:19.000000Z",
        "updated_at": "2025-12-24T08:30:19.000000Z"
      },
      {
        "id": 2,
        "form_template_id": 1,
        "field_type": "number",
        "label": "Your age",
        "placeholder": "Enter your age",
        "options": null,
        "validation_rules": {
          "min": 18
        },
        "is_required": true,
        "order": 2,
        "created_at": "2025-12-24T08:30:19.000000Z",
        "updated_at": "2025-12-24T08:30:19.000000Z"
      },
      {
        "id": 3,
        "form_template_id": 1,
        "field_type": "radio",
        "label": "Your Gender",
        "placeholder": "Enter your gender",
        "options": [
          "Male",
          "Female",
          "Other"
        ],
        "validation_rules": null,
        "is_required": true,
        "order": 3,
        "created_at": "2025-12-24T08:30:19.000000Z",
        "updated_at": "2025-12-24T08:30:19.000000Z"
      },
      {
        "id": 4,
        "form_template_id": 1,
        "field_type": "text",
        "label": "Your feedback",
        "placeholder": "Enter your feedback in 100 characters",
        "options": null,
        "validation_rules": {
          "max": 100
        },
        "is_required": true,
        "order": 4,
        "created_at": "2025-12-24T08:30:19.000000Z",
        "updated_at": "2025-12-24T08:30:19.000000Z"
      }
    ]
  }
}


Now to import the excel file to create form template (IMPORT):


Import: it took 
  - 9.82 seconds to import 10000 data.
  - 1.2 minutes to import 100000 data.

Export: it took
  - 9.37 seconds to export 10000 data.
  - 1.2 minutes to export 110000 data.

curl -X 'POST' \
  'http://localhost:8000/api/admin/submissions/import' \
  -H 'accept: */*' \
  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3NjY1NjY0MDgsImV4cCI6MTc2NjU3MDAwOCwibmJmIjoxNzY2NTY2NDA4LCJqdGkiOiJlTXRHNHZuN2U0TEljWlRxIiwic3ViIjoiMSIsInBydiI6IjIzYmQ1Yzg5NDlmNjAwYWRiMzllNzAxYzQwMDg3MmRiN2E1OTc2ZjciLCJ1c2VyX2lkIjoxLCJlbWFpbCI6ImFkbWluQGR5bmFtaWNoci5jb20iLCJuYW1lIjoiU3lzdGVtIEFkbWluaXN0cmF0b3IiLCJyb2xlcyI6WyJhZG1pbiJdfQ.19nMtBccQnq1jF2pltyVreDKQlylMJfr8W7poxO7j1Q' \
  -H 'Content-Type: multipart/form-data' \
  -H 'X-CSRF-TOKEN: ' \
  -F 'file=@people10k.csv;type=text/csv' \
  -F 'form_template_id=2'
  
  {
    "success": true,
    "message": "Import completed",
    "data": {
      "imported": 8295,
      "skipped": 1705,
      "total": 10000,
      "errors": [
        {
          "row": 3,
          "error": "'Your age' must be at least 18 at row 3. Got: 9"
        },
        {
          "row": 8,
          "error": "'Your age' must be at least 18 at row 8. Got: 2"
        }, ... 
      ]
    }    
}


for queue, allow 1GB for import
php -d memory_limit=1024M artisan queue:work --tries=3 --timeout=600

php -d memory_limit=1024M artisan queue:work --tries=3 --timeout=600 --max-jobs=0 --sleep=3


while true; do php -d memory_limit=1024M artisan queue:work --tries=3 --timeout=600 --once; done
-> runs forever

checking if job is running:
php artisan tinker --execute="echo 'Jobs in queue: ' . \Illuminate\Support\Facades\Redis::connection('default')->llen('queues:default') . ' | Submissions: ' . \App\Models\FormSubmission::count();"

in server with queue (10,000 data):
curl -X 'GET' \
  'https://hr.devendrahamal.com.np/api/admin/submissions/imports' \
  -H 'accept: application/json' \
  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2hyLmRldmVuZHJhaGFtYWwuY29tLm5wL2FwaS9hdXRoL2xvZ2luIiwiaWF0IjoxNzY2NjU4NjA1LCJleHAiOjE3NjY2NjIyMDUsIm5iZiI6MTc2NjY1ODYwNSwianRpIjoia0RCNlpsVnFVVTAyelpiayIsInN1YiI6IjEiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3IiwidXNlcl9pZCI6MSwiZW1haWwiOiJhZG1pbkBkeW5hbWljaHIuY29tIiwibmFtZSI6IlN5c3RlbSBBZG1pbmlzdHJhdG9yIiwicm9sZXMiOlsiYWRtaW4iXX0.7hD94z2JBxj0nZgjebB_0oq83-kdTSEmI7NtZIATX_Q' \
  -H 'X-CSRF-TOKEN: '

  {
  "success": true,
  "message": "Imports retrieved",
  "data": {
    "imports": [
      {
        "id": 1,
        "form_template_id": 1,
        "filename": "people10k.csv",
        "status": "completed",
        "imported_count": 8295,
        "skipped_count": 1705,
        "errors": [],
        "started_at": "2025-12-25 11:08:02",
        "completed_at": "2025-12-25 11:09:36",
        "created_at": "2025-12-25 11:08:01"
      }
    ],
    "total": 1
  }
}